Простая система мониторинга метрик, входящих в нее producer-узлов.
Для работоспособности системы должен присутствовать хотя бы один consumer-узел (зависимый от БД и брокера Кафка).
Опционально в систему может входить N producer-узлов (зависящих только от Кафки).
Узлам не требуется иметь зависимости между друг другом, однако для валидности собираемых данных
producer-узлы должны соблюдать описанные ниже правила формирования сообщений
(консистентность имен узлов внутри системы и происхождения сообщений). 

### Проект состоит из трех модулей: 
1. **metric-common**

    Общий утилитарный модуль для сервисов, входящих в систему (dto, event, etc.) 
2. **kafka-consumer**

   Микросервис, который вычитывает, обрабатывает и сохраняет метрики в БД. Предоставляет API для анализа.
3. **kafka-producer**

   Микросервис, который отправляет метрики на основе метрик Spring Boot Actuator. Предоставляет API для ручной отправки метрик.

Написано с использованием `JDK oracle-17.0.4.1`, позаботьтесь о совместимости инструментов компиляции и сборки.

### Инструкции по запуску и использованию системы:
1. В корневой папке проекта выполняем Maven `package`.
2. В корневой папке проекта находим docker-compose файл и выполняем сначала `postgres` и `zookeeper`. Затем `kafka` и все остальные сервисы. 
(либо поднимаем все сразу и рестартуем упавшие)

Для удобства используем:
- Kafka UI: http://localhost:8080
- Consumer API: http://localhost:8081/swagger-ui/index.html
- Producer-1 API: http://localhost:8082/swagger-ui/index.html
- Producer-2 API: http://localhost:8083/swagger-ui/index.html

Приведены внешние ссылки при развертывании системы в docker-контейнерах, для локального запуска обратитесь к `application.properties` используемого модуля.

По умолчанию метрики о времени работы узла, а также потреблении CPU и памяти отправляются продюсером каждые 20 секунд. 
Единожды при каждом старте (спустя 10 сек) отправляется метрика с временем поднятия сервиса.
Поле метрики `Appearance` для генерируемых продюсером всегда `INTERNAL`, для ручной отправки - `EXTERNAL`. 
В зависимости от происхождения метрики (каким узлом она была сгенерирована / принята по REST API) каждая получает значение поля `Source`.

Для получения актуальных метрик узла (продюсера) необходимо передать значение его параметра `Source`
(`kafka.metric.source` - для развернутых в докере сервисов по умолчанию `node-1` и `node-2`).
Более подробно с методами API сервисов можно ознакомиться по ссылкам выше. 

Пример с попаданием сообщения в DLT-топик можно воспроизвести при ручном добавлении через API продюсера или UI кафки валидного сообщения 
с уже присутствующим в БД UUID.


###### Описание полей метрики
- id - генерируемый на стороне продюсера Universally unique identifier
- name - наименование метрики
- baseUnit - единицы измерения
- value - значение
- appearance - тип происхождения метрики (внешняя/внутренняя)
- source - источник метрики (имя продюсер-узла)
- receiptTime - время обработки и сохранения (консьюмером) метрики в БД