### Проект состоит из трех модулей: 
1. **metric-common**

    Общий утилитарный модуль для сервисов, входящих в систему (dto, event, etc.) 
2. **kafka-consumer**

   Микросервис, который вычитывает, обрабатывает и сохраняет метрики в БД. Предоставляет API для анализа.
3. **kafka-producer**

   Микросервис, который отправляет метрики Spring Boot Actuator (по умолчанию о старте узла и времени его работы, а также потреблении CPU и memory).
   Предоставляет API для ручной отправки метрик.

Написано с использованием `JDK oracle-17.0.4.1`, позаботьтесь о совместимости с инструментов сборки.

### Инструкции по запуску и использованию системы:
1. В корневой папке проекта выполняем Maven `package`.
2. В корневой папке проекта выполняем сначала `postgres` и `zookeeper`. Затем `kafka` и все остальные сервисы. (либо поднимаем все сразу и рестартуем упавшие)

Для удобства используем:
- Consumer API: http://localhost:8081/swagger-ui/index.html
- Producer-1 API: http://localhost:8082/swagger-ui/index.html
- Producer-2 API: http://localhost:8083/swagger-ui/index.html
- Kafka UI: http://localhost:8080

Приведены внешние ссылки при развертывании системы в docker-контейнерах, для локального запуска обратитесь в `application.properties` используемого модуля.

По умолчанию метрики отправляются продюсером каждые 20 секунд. Поле метрик `Appearance` для генерируемых продюсером всегда `INTERNAL`,
для ручной отправки - `EXTERNAL`. В зависимости от происхождения метрики (каким узлом она была сгенерирована / принята по REST API)
каждая получает значение поля `Source`.

Для получения актуальных метрик узла (продюсера) необходимо передать значение его параметра `kafka.metric.source` (по умолчанию node-1 и node-2).

Пример с попаданием сообщения в DLT-топик можно воспроизвести при ручном добавлении через API продюсера или UI кафки валидного сообщения 
с уже присутствующим в БД UUID.